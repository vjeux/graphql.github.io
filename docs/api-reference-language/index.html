<!DOCTYPE html><html><head><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1"><title>Language | GraphQL</title><meta name="viewport" content="width=device-width"><meta property="og:title" content="GraphQL | A data query language and runtime"><meta property="og:type" content="website"><meta property="og:url" content="http://graphql.org/"><meta property="og:description" content="A data query language and runtime"><link rel="shortcut icon" href="/img/favicon.png"><link rel="stylesheet" href="/css/graphql.css"><script type="text/javascript" src="//use.typekit.net/vqa1hcx.js"></script><script type="text/javascript">try{Typekit.load();}catch(e){}</script></head><body><div class="container"><div class="nav-main"><div class="wrap"><a class="nav-home" href="/"><img class="nav-logo" src="/img/logo.svg" width="40" height="40">GraphQL</a><ul class="nav-site"><li><a href="/docs/getting-started/" class="active">Docs</a></li><li><a href="/blog/" class="">Blog</a></li><li><a href="/help/" class="">Help</a></li><li><a href="/code/" class="">Code</a></li><li><a href="http://facebook.github.io/graphql/" target="_blank" class="">Spec</a></li></ul></div></div><section class="content wrap documentationContent"><div class="nav-docs"><div class="nav-docs-section"><h3>Quick Start</h3><ul><li><a style="margin-left:0;" class="active" href="/docs/getting-started/">Getting Started</a></li><li><a style="margin-left:0;" class="active" href="/docs/videos/">Videos</a></li></ul></div><div class="nav-docs-section"><h3>Walkthrough</h3><ul><li><a style="margin-left:0;" class="active" href="/docs/intro/">Introduction</a></li><li><a style="margin-left:0;" class="active" href="/docs/typesystem/">Type System</a></li><li><a style="margin-left:0;" class="active" href="/docs/queries/">Queries</a></li><li><a style="margin-left:0;" class="active" href="/docs/validation/">Validation</a></li><li><a style="margin-left:0;" class="active" href="/docs/introspection/">Introspection</a></li></ul></div><div class="nav-docs-section"><h3>API Reference</h3><ul><li><a style="margin-left:0;" class="active" href="/docs/api-reference-graphql/">GraphQL</a></li><li><a style="margin-left:0;" class="active" href="/docs/api-reference-language/">Language</a></li><li><a style="margin-left:0;" class="active" href="/docs/api-reference-type-system/">Type System</a></li><li><a style="margin-left:0;" class="active" href="/docs/api-reference-validation/">Validation</a></li><li><a style="margin-left:0;" class="active" href="/docs/api-reference-execution/">Execution</a></li><li><a style="margin-left:0;" class="active" href="/docs/api-reference-errors/">Errors</a></li><li><a style="margin-left:0;" class="active" href="/docs/api-reference-utilities/">Utilties</a></li></ul></div></div><div class="inner-content"><h1>Language</h1><div><p>The <code>graphql/language</code> module is responsible for parsing and operating on the
GraphQL language.</p><pre class="prism language-javascript">
<span class="token keyword">import</span> <span class="token punctuation">{</span> <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span> <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&#x27;graphql/language&#x27;</span><span class="token punctuation">;</span> <span spellcheck="true" class="token comment">// ES6</span>
<span class="token keyword">var</span> GraphQLLanguage <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&#x27;graphql/language&#x27;</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span spellcheck="true" class="token comment">// CommonJS</span></pre><h2><a class="anchor" name="overview"></a>Overview <a class="hash-link" href="#overview">#</a></h2><p><em>Source</em></p><div><ul class="apiIndex">
  <li>
    <a href="#source">
      <pre>class Source</pre>
      Represents the input string to the GraphQL server
    </a>
  </li>
  <li>
    <a href="#getlocation">
      <pre>function getLocation</pre>
      Converts a character offset to a row and column in the Source
    </a>
  </li>
</ul>

</div><p><em>Lexer</em></p><div><ul class="apiIndex">
  <li>
    <a href="#lex">
      <pre>function lex</pre>
      Lexes a GraphQL Source according to the GraphQL Grammar
    </a>
  </li>
</ul>

</div><p><em>Parser</em></p><div><ul class="apiIndex">
  <li>
    <a href="#parse">
      <pre>function parse</pre>
      Parses a GraphQL Source according to the GraphQL Grammar
    </a>
  </li>
  <li>
    <a href="#parseValue">
      <pre>function parseValue</pre>
      Parses a value according to the GraphQL Grammar
    </a>
  </li>
  <li>
    <a href="#kind">
      <pre>var Kind</pre>
      Represents the various kinds of parsed AST nodes.
    </a>
  </li>
</ul>

</div><p><em>Visitor</em></p><div><ul class="apiIndex">
  <li>
    <a href="#visit">
      <pre>function visit</pre>
      A general-purpose visitor to traverse a parsed GraphQL AST
    </a>
  </li>
  <li>
    <a href="#break">
      <pre>var BREAK</pre>
      A token to allow breaking out of the visitor.
    </a>
  </li>
</ul>

</div><p><em>Printer</em></p><div><ul class="apiIndex">
  <li>
    <a href="#print">
      <pre>function print</pre>
      Prints an AST in a standard format.
    </a>
  </li>
</ul>

</div><h2><a class="anchor" name="source"></a>Source <a class="hash-link" href="#source">#</a></h2><h3><a class="anchor" name="source"></a>Source <a class="hash-link" href="#source">#</a></h3><pre class="prism language-javascript">
<span class="token keyword">export</span> <span class="token keyword">class</span> <span class="token class-name">Source</span> <span class="token punctuation">{</span>
  <span class="token function">constructor</span><span class="token punctuation">(</span>body<span class="token punctuation">:</span> string<span class="token punctuation">,</span> name<span class="token operator">?</span><span class="token punctuation">:</span> string<span class="token punctuation">)</span>
<span class="token punctuation">}</span></pre><p>A representation of source input to GraphQL. The name is optional,
but is mostly useful for clients who store GraphQL documents in
source files; for example, if the GraphQL input is in a file Foo.graphql,
it might be useful for name to be &quot;Foo.graphql&quot;.</p><h3><a class="anchor" name="getlocation"></a>getLocation <a class="hash-link" href="#getlocation">#</a></h3><pre class="prism language-javascript">
<span class="token keyword">function</span> <span class="token function">getLocation</span><span class="token punctuation">(</span>source<span class="token punctuation">:</span> Source<span class="token punctuation">,</span> position<span class="token punctuation">:</span> number<span class="token punctuation">)</span><span class="token punctuation">:</span> SourceLocation

type SourceLocation <span class="token operator">=</span> <span class="token punctuation">{</span>
  line<span class="token punctuation">:</span> number<span class="token punctuation">;</span>
  column<span class="token punctuation">:</span> number<span class="token punctuation">;</span>
<span class="token punctuation">}</span></pre><p>Takes a Source and a UTF-8 character offset, and returns the corresponding
line and column as a SourceLocation.</p><h2><a class="anchor" name="lexer"></a>Lexer <a class="hash-link" href="#lexer">#</a></h2><h3><a class="anchor" name="lex"></a>lex <a class="hash-link" href="#lex">#</a></h3><pre class="prism language-javascript">
<span class="token keyword">function</span> <span class="token function">lex</span><span class="token punctuation">(</span>source<span class="token punctuation">:</span> Source<span class="token punctuation">)</span><span class="token punctuation">:</span> Lexer<span class="token punctuation">;</span>

type Lexer <span class="token operator">=</span> <span class="token punctuation">(</span>resetPosition<span class="token operator">?</span><span class="token punctuation">:</span> number<span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">&gt;</span> Token<span class="token punctuation">;</span>

<span class="token keyword">export</span> type Token <span class="token operator">=</span> <span class="token punctuation">{</span>
  kind<span class="token punctuation">:</span> number<span class="token punctuation">;</span>
  start<span class="token punctuation">:</span> number<span class="token punctuation">;</span>
  end<span class="token punctuation">:</span> number<span class="token punctuation">;</span>
  value<span class="token punctuation">:</span> <span class="token operator">?</span>string<span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span></pre><p>Given a Source object, this returns a Lexer for that source.
A Lexer is a function that acts like a generator in that every time
it is called, it returns the next token in the Source. Assuming the
source lexes, the final Token emitted by the lexer will be of kind
EOF, after which the lexer will repeatedly return EOF tokens whenever
called.</p><p>The argument to the lexer function is optional, and can be used to
rewind or fast forward the lexer to a new position in the source.</p><h2><a class="anchor" name="parser"></a>Parser <a class="hash-link" href="#parser">#</a></h2><h3><a class="anchor" name="parse"></a>parse <a class="hash-link" href="#parse">#</a></h3><pre class="prism language-javascript">
<span class="token keyword">export</span> <span class="token keyword">function</span> <span class="token function">parse</span><span class="token punctuation">(</span>
  source<span class="token punctuation">:</span> Source <span class="token operator">|</span> string<span class="token punctuation">,</span>
  options<span class="token operator">?</span><span class="token punctuation">:</span> ParseOptions
<span class="token punctuation">)</span><span class="token punctuation">:</span> Document</pre><p>Given a GraphQL source, parses it into a Document.</p><p>Throws GraphQLError if a syntax error is encountered.</p><h3><a class="anchor" name="parsevalue"></a>parseValue <a class="hash-link" href="#parsevalue">#</a></h3><pre class="prism language-javascript">
<span class="token keyword">export</span> <span class="token keyword">function</span> <span class="token function">parseValue</span><span class="token punctuation">(</span>
  source<span class="token punctuation">:</span> Source <span class="token operator">|</span> string<span class="token punctuation">,</span>
  options<span class="token operator">?</span><span class="token punctuation">:</span> ParseOptions
<span class="token punctuation">)</span><span class="token punctuation">:</span> Value</pre><p>Given a string containing a GraphQL value, parse the AST for that value.</p><p>Throws GraphQLError if a syntax error is encountered.</p><p>This is useful within tools that operate upon GraphQL Values directly and
in isolation of complete GraphQL documents.</p><h3><a class="anchor" name="kind"></a>Kind <a class="hash-link" href="#kind">#</a></h3><p>An enum that describes the different kinds of AST nodes.</p><h2><a class="anchor" name="visitor"></a>Visitor <a class="hash-link" href="#visitor">#</a></h2><h3><a class="anchor" name="visit"></a>visit <a class="hash-link" href="#visit">#</a></h3><pre class="prism language-javascript">
<span class="token keyword">function</span> <span class="token function">visit</span><span class="token punctuation">(</span>root<span class="token punctuation">,</span> visitor<span class="token punctuation">,</span> keyMap<span class="token punctuation">)</span></pre><p>visit() will walk through an AST using a depth first traversal, calling
the visitor&#x27;s enter function at each node in the traversal, and calling the
leave function after visiting that node and all of it&#x27;s child nodes.</p><p>By returning different values from the enter and leave functions, the
behavior of the visitor can be altered, including skipping over a sub-tree of
the AST (by returning false), editing the AST by returning a value or null
to remove the value, or to stop the whole traversal by returning BREAK.</p><p>When using visit() to edit an AST, the original AST will not be modified, and
a new version of the AST with the changes applied will be returned from the
visit function.</p><pre class="prism language-javascript">
<span class="token keyword">var</span> editedAST <span class="token operator">=</span> <span class="token function">visit</span><span class="token punctuation">(</span>ast<span class="token punctuation">,</span> <span class="token punctuation">{</span>
  <span class="token function">enter</span><span class="token punctuation">(</span>node<span class="token punctuation">,</span> key<span class="token punctuation">,</span> parent<span class="token punctuation">,</span> path<span class="token punctuation">,</span> ancestors<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span spellcheck="true" class="token comment">// @return</span>
    <span spellcheck="true" class="token comment">//   undefined: no action</span>
    <span spellcheck="true" class="token comment">//   false: skip visiting this node</span>
    <span spellcheck="true" class="token comment">//   visitor.BREAK: stop visiting altogether</span>
    <span spellcheck="true" class="token comment">//   null: delete this node</span>
    <span spellcheck="true" class="token comment">//   any value: replace this node with the returned value</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token function">leave</span><span class="token punctuation">(</span>node<span class="token punctuation">,</span> key<span class="token punctuation">,</span> parent<span class="token punctuation">,</span> path<span class="token punctuation">,</span> ancestors<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span spellcheck="true" class="token comment">// @return</span>
    <span spellcheck="true" class="token comment">//   undefined: no action</span>
    <span spellcheck="true" class="token comment">//   false: no action</span>
    <span spellcheck="true" class="token comment">//   visitor.BREAK: stop visiting altogether</span>
    <span spellcheck="true" class="token comment">//   null: delete this node</span>
    <span spellcheck="true" class="token comment">//   any value: replace this node with the returned value</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre><p>Alternatively to providing enter() and leave() functions, a visitor can
instead provide functions named the same as the kinds of AST nodes, or
enter/leave visitors at a named key, leading to four permutations of
visitor API:</p><p>1) Named visitors triggered when entering a node a specific kind.</p><pre class="prism language-javascript">
<span class="token function">visit</span><span class="token punctuation">(</span>ast<span class="token punctuation">,</span> <span class="token punctuation">{</span>
  <span class="token function">Kind</span><span class="token punctuation">(</span>node<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span spellcheck="true" class="token comment">// enter the &quot;Kind&quot; node</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span></pre><p>2) Named visitors that trigger upon entering and leaving a node of
   a specific kind.</p><pre class="prism language-javascript">
<span class="token function">visit</span><span class="token punctuation">(</span>ast<span class="token punctuation">,</span> <span class="token punctuation">{</span>
  Kind<span class="token punctuation">:</span> <span class="token punctuation">{</span>
    <span class="token function">enter</span><span class="token punctuation">(</span>node<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span spellcheck="true" class="token comment">// enter the &quot;Kind&quot; node</span>
    <span class="token punctuation">}</span>
    <span class="token function">leave</span><span class="token punctuation">(</span>node<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span spellcheck="true" class="token comment">// leave the &quot;Kind&quot; node</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span></pre><p>3) Generic visitors that trigger upon entering and leaving any node.</p><pre class="prism language-javascript">
<span class="token function">visit</span><span class="token punctuation">(</span>ast<span class="token punctuation">,</span> <span class="token punctuation">{</span>
  <span class="token function">enter</span><span class="token punctuation">(</span>node<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span spellcheck="true" class="token comment">// enter any node</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token function">leave</span><span class="token punctuation">(</span>node<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span spellcheck="true" class="token comment">// leave any node</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span></pre><p>4) Parallel visitors for entering and leaving nodes of a specific kind.</p><pre class="prism language-javascript">
<span class="token function">visit</span><span class="token punctuation">(</span>ast<span class="token punctuation">,</span> <span class="token punctuation">{</span>
  enter<span class="token punctuation">:</span> <span class="token punctuation">{</span>
    <span class="token function">Kind</span><span class="token punctuation">(</span>node<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span spellcheck="true" class="token comment">// enter the &quot;Kind&quot; node</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  leave<span class="token punctuation">:</span> <span class="token punctuation">{</span>
    <span class="token function">Kind</span><span class="token punctuation">(</span>node<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span spellcheck="true" class="token comment">// leave the &quot;Kind&quot; node</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span></pre><h3><a class="anchor" name="break"></a>BREAK <a class="hash-link" href="#break">#</a></h3><p>The sentinel <code>BREAK</code> value described in the documentation of <code>visitor</code>.</p><h2><a class="anchor" name="printer"></a>Printer <a class="hash-link" href="#printer">#</a></h2><h3><a class="anchor" name="print"></a>print <a class="hash-link" href="#print">#</a></h3><pre class="prism language-javascript">
<span class="token keyword">function</span> <span class="token function">print</span><span class="token punctuation">(</span>ast<span class="token punctuation">)</span><span class="token punctuation">:</span> string</pre><p>Converts an AST into a string, using one set of reasonable
formatting rules.</p></div><div class="docs-prevnext"><a class="docs-next" href="/docs/api-reference-type-system">Next →</a></div></div></section><footer class="wrap"><div class="right">©2015 Facebook Inc.</div></footer></div><div id="fb-root"></div><script>
            !function(d,s,id){var js,fjs=d.getElementsByTagName(s)[0],p=/^http:/.test(d.location)?'http':'https';if(!d.getElementById(id)){js=d.createElement(s);js.id=id;js.src=p+"://platform.twitter.com/widgets.js";fjs.parentNode.insertBefore(js,fjs);}}(document,"script","twitter-wjs");
          </script></body></html>